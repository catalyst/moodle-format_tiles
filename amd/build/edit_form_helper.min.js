define(["jquery","core/notification","core/str","core/templates","format_tiles/browser_storage"],function($,Notification,str,Templates,browserStorage){"use strict";return{init:function(pageType,courseDefaultIcon,courseId,sectionId,section,userId,allowphototiles,documentationUrl){$(document).ready(function(){$("select#id_courseusesubtiles").change(function(e){if(e.currentTarget.value!=="0"){$("input#id_courseusebarforheadings").prop("checked",false)}});$("select#id_courseshowtileprogress").change(function(e){if(e.currentTarget.value!=="0"){var enableCompBox=$("select#id_enablecompletion");if(enableCompBox.val()==="0"){enableCompBox.val("1");str.get_strings([{key:"completion",component:"completion"},{key:"completionswitchhelp",component:"format_tiles"}]).done(function(s){Notification.alert(s[0],s[1])})}}});$("select#id_enablecompletion").change(function(e){if(e.currentTarget.value==="0"){$("select#id_courseshowtileprogress").val("0")}});var colourSelectMenu=$("select#id_basecolour");Templates.render("format_tiles/colour_picker",{colours:colourSelectMenu.find("option").map(function(index,option){var optselector=$(option);var colour=optselector.attr("value");return{colour:colour,colourname:optselector.text(),selected:colour===colourSelectMenu.val(),id:colour.replace("#","")}}).toArray()}).done(function(html){$(html).insertAfter(colourSelectMenu);colourSelectMenu.hide();var circles=$(".colourpickercircle");circles.click(function(e){var clicked=$(e.currentTarget);circles.removeClass("selected");clicked.addClass("selected");colourSelectMenu.val(clicked.attr("data-colour"));$("#colourselectnotify").fadeIn(200).fadeOut(1200)});colourSelectMenu.change(function(){circles.removeClass("selected");$("#colourpick_"+colourSelectMenu.val().replace("#","")).addClass("selected")});var body=$("body");if(!body.hasClass("format-tiles")){body.addClass("format-tiles")}});var selectedIconName;var selectBox;if(pageType==="course-edit"){selectBox=$("#id_defaulttileicon");selectedIconName=$("#id_defaulttileicon option:selected").text()}else if(pageType==="course-editsection"){selectBox=$("#id_tileicon");selectedIconName=$("#id_tileicon option:selected").text()}if(pageType==="course-edit"||pageType==="course-editsection"&&section!=="0"){var currentIcon;if(selectBox.val()===""){currentIcon=courseDefaultIcon}else{currentIcon=selectBox.val()}Templates.render("format_tiles/icon_picker_launch_btn",{initialicon:currentIcon,initialname:selectedIconName,sectionId:sectionId,allowphototiles:allowphototiles}).done(function(html){$(html).insertAfter(selectBox);selectBox.hide();require(["format_tiles/edit_icon_picker"],function(iconPicker){iconPicker.init(courseId,pageType,allowphototiles,documentationUrl)})})}else if(pageType==="course-editsection"&&section==="0"){selectBox.closest(".row").hide()}Templates.render("format_tiles/edit_form_helptext",{documentationurl:documentationUrl+"/teacher"}).done(function(html){$(html).appendTo($("#id_courseformathdr .fcontainer"))});browserStorage.init(courseId,1,true,1,0,true,userId);browserStorage.cleanUpStorage()})}}});
//# sourceMappingURL=edit_form_helper.min.js.map